# EPIC-UX-003: AI Copilot & Command Bar

**Priority:** P0 | **Estimated Effort:** 4 weeks | **Dependencies:** EPIC-UX-001, EPIC-UX-002
**Theme:** The "Form Killer" - Natural language interface for all PRM operations

---

## Executive Summary

The AI Copilot Command Bar is the revolutionary primary input method for the entire PRM application. Inspired by Spotlight Search (Mac), Raycast, and modern command palettes (Cmd+K), it allows users to perform any action through natural language text or voice input. This fundamentally transforms the traditional form-filling paradigm into a conversational, AI-powered experience where complex operations become simple spoken or typed instructions.

---

## Strategic Objectives

1. **Form Elimination** - Replace 80% of form interactions with natural language
2. **Voice-First** - Enable hands-free operation for clinical settings
3. **Intelligent Parsing** - Accurate entity extraction from conversational input
4. **Contextual Awareness** - Understand context from current screen/patient
5. **Learning System** - Improve accuracy based on corrections and usage

---

## Backend API Dependencies

| Service | Endpoint | Purpose |
|---------|----------|---------|
| AI Platform | `/api/v1/prm/ai/chat` | Natural language processing |
| AI Platform | `/api/v1/prm/ai/parse-intent` | Intent & entity extraction |
| FHIR | `/api/v1/prm/fhir/*` | Execute CRUD operations |
| Clinical Workflows | `/api/v1/clinical/*` | Clinical actions |
| Automation | `/api/v1/prm/automation/execute` | Workflow execution |

---

## User Journeys

### Journey 3.1: Quick Appointment Booking via Text

**Persona:** Front Desk Receptionist booking a new appointment

**Context:** Patient calls to book an appointment. Instead of navigating through multiple screens, the receptionist uses the command bar.

**Flow:**
```
Trigger Command Bar (Cmd+K) â†’ Type Command â†’ AI Parses Entities â†’
Display Ghost Card â†’ User Verifies/Corrects â†’ Execute â†’ Confirmation
```

**Detailed Experience:**

1. **Trigger Command Bar**
   - Press `Cmd+K` (Mac) or `Ctrl+K` (Windows)
   - Or click the search icon in the top bar
   - Or click the floating AI assistant button

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                                     â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ ğŸ¤– Ask anything or type a command...              [ğŸ¤] [âŒ˜K]  â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                                     â”‚
   â”‚  Recent Commands:                                                   â”‚
   â”‚  â€¢ Book appointment for John Doe with Dr. Sharma                   â”‚
   â”‚  â€¢ Add 2PM slot for Dr. Kohli tomorrow                             â”‚
   â”‚  â€¢ Show today's schedule for Cardiology                            â”‚
   â”‚                                                                     â”‚
   â”‚  Quick Actions:                                                     â”‚
   â”‚  [ğŸ“… Book Appointment] [ğŸ‘¤ Find Patient] [ğŸ“Š View Analytics]       â”‚
   â”‚                                                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

2. **Type Natural Language Command**
   User types: "Book a 2PM appointment for patient 9844111173 with Dr. Virat Kohli from orthopaedics at Surya Whitefield"

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ¤– Book a 2PM appointment for patient 9844111173 with Dr. Viraâ–ˆ     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                                                       â”‚
   â”‚  â³ Parsing your request...                                          â”‚
   â”‚                                                                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. **Ghost Card Display**
   AI parses and displays extracted entities as a visual "draft":

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                        BOOKING PREVIEW                                  â”‚
   â”‚                                                                         â”‚
   â”‚  I understood this as:                                                  â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ“… ACTION: Book Appointment                                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ‘¤ Patient:      [Rajesh Kumar          âœ“]  â† Click to change â”‚   â”‚
   â”‚  â”‚                   ğŸ“± +91 9844111173                             â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ‘¨â€âš•ï¸ Doctor:       [Dr. Virat Kohli       âœ“]                    â”‚   â”‚
   â”‚  â”‚                   ğŸ¦´ Orthopedics                                â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ¥ Location:     [Surya Whitefield       âœ“]                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ• Time:         [Today, 2:00 PM         âœ“]                    â”‚   â”‚
   â”‚  â”‚                   âš ï¸ 1 slot available                          â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  â±ï¸ Duration:     [30 minutes             â–¼]                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ“ Visit Type:   [Follow-up              â–¼]                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  ğŸ’¡ Pro tip: Say "change time to 3PM" to modify                        â”‚
   â”‚                                                                         â”‚
   â”‚  [Cancel]                                          [âœ“ Book Appointment] â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

4. **Entity Correction Flow**
   If AI got something wrong, user clicks the tag to correct:

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ‘¤ Select Patient                        [âœ•]   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ ğŸ” Search patients...                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Matching "+91 9844111173":                     â”‚
   â”‚                                                 â”‚
   â”‚ â—‰ Rajesh Kumar                                 â”‚
   â”‚   DOB: 15/03/1985 â€¢ MRN: 12345                â”‚
   â”‚   Last visit: Nov 20, 2024                     â”‚
   â”‚                                                 â”‚
   â”‚ â—‹ Rajesh K. Sharma (Different number)         â”‚
   â”‚   DOB: 22/07/1990 â€¢ MRN: 67890                â”‚
   â”‚                                                 â”‚
   â”‚ â—‹ Create new patient                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

5. **Execution & Confirmation**
   User clicks "Book Appointment":

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                                 â”‚
   â”‚                    âœ“ Appointment Booked!                        â”‚
   â”‚                                                                 â”‚
   â”‚  Rajesh Kumar with Dr. Virat Kohli                             â”‚
   â”‚  Today at 2:00 PM â€¢ Surya Whitefield                           â”‚
   â”‚                                                                 â”‚
   â”‚  â˜‘ï¸ WhatsApp confirmation sent to patient                      â”‚
   â”‚  â˜‘ï¸ Calendar invite sent to doctor                             â”‚
   â”‚                                                                 â”‚
   â”‚  [View Appointment]  [Book Another]  [Done]                    â”‚
   â”‚                                                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

---

### Journey 3.2: Voice Command for Slot Management

**Persona:** Scheduling Coordinator managing doctor schedules

**Context:** Dr. Rohit Sharma calls to add availability. The coordinator uses voice input.

**Flow:**
```
Hold Spacebar â†’ Speak Command â†’ Voice Transcription â†’ AI Parsing â†’
Ghost Card â†’ Confirm â†’ Execute
```

**Detailed Experience:**

1. **Voice Activation**
   - Press and hold Spacebar (when command bar focused)
   - Or click microphone icon
   - Visual feedback: pulsing red dot, sound wave animation

   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                                     â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ ğŸ”´ Listening...                           [Release to stop]  â”‚  â”‚
   â”‚  â”‚                                                               â”‚  â”‚
   â”‚  â”‚     ~~~~ ğŸ¤ ~~~~                                              â”‚  â”‚
   â”‚  â”‚                                                               â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

2. **User Speaks:**
   "Add 1PM to 2PM slot for Doctor Rohit Sharma from Cardiology every Tuesday and Thursday for the next month"

3. **Real-Time Transcription:**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                                                     â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ ğŸ”´ "Add 1PM to 2PM slot for Doctor Rohit Sharma from..."     â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

4. **Ghost Card for Recurring Slot:**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                      ADD RECURRING SLOTS                                â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ“… ACTION: Create Recurring Availability                       â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ‘¨â€âš•ï¸ Doctor:       [Dr. Rohit Sharma      âœ“]                    â”‚   â”‚
   â”‚  â”‚                   â¤ï¸ Cardiology                                 â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ• Time Slot:    [1:00 PM - 2:00 PM      âœ“]                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ”„ Recurrence:   [Every Tuesday & Thursday]                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ“† Duration:     [Next 4 weeks            â–¼]                   â”‚   â”‚
   â”‚  â”‚                   Nov 26 - Dec 24, 2024                         â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  ğŸ“Š Preview: 8 slots will be created                            â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
   â”‚  â”‚  â”‚ Tue Nov 26  â”‚ Thu Nov 28  â”‚ Tue Dec 3   â”‚ Thu Dec 5    â”‚ â”‚   â”‚
   â”‚  â”‚  â”‚ Tue Dec 10  â”‚ Thu Dec 12  â”‚ Tue Dec 17  â”‚ Thu Dec 19   â”‚ â”‚   â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  [Cancel]                                           [âœ“ Create Slots]   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

---

### Journey 3.3: Contextual Commands

**Persona:** Doctor viewing a patient profile

**Context:** While on a patient's profile, the doctor wants to perform actions without leaving the page.

**Flow:**
```
Open Command Bar â†’ Context Auto-Populated â†’ Type Short Command â†’
Execute with Patient Context
```

**Contextual Awareness:**

When on Patient "John Doe"'s profile:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤– What would you like to do for John Doe?         [ğŸ¤] [âŒ˜K] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“ Context: Patient John Doe (MRN: 12345)                         â”‚
â”‚                                                                     â”‚
â”‚  Quick Actions for this patient:                                    â”‚
â”‚  [ğŸ“… Book Appointment] [ğŸ’Š Prescribe] [ğŸ“ Add Note] [ğŸ“¤ Send Msg]  â”‚
â”‚                                                                     â”‚
â”‚  Recent for John Doe:                                               â”‚
â”‚  â€¢ Prescribed Metformin 500mg - 3 days ago                         â”‚
â”‚  â€¢ Cardiology follow-up - Nov 20                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Short Commands in Context:**
- "Book follow-up next week" â†’ Books for current patient
- "Prescribe Metformin 500mg twice daily" â†’ Creates Rx for current patient
- "Send appointment reminder" â†’ Sends to current patient
- "Add allergy to Penicillin" â†’ Updates current patient's allergies
- "Show BP trend" â†’ Displays chart for current patient's blood pressure

---

### Journey 3.4: Complex Multi-Step Operations

**Persona:** Department Manager handling doctor leave

**Context:** Dr. Rohit is on leave next week. Manager needs to reassign appointments and notify patients.

**Flow:**
```
Trigger Command Bar â†’ Describe Complex Task â†’ AI Breaks Down Steps â†’
Review Plan â†’ Approve Each Step â†’ Execute All
```

**Detailed Experience:**

1. **Complex Command:**
   "Dr. Rohit is on leave next week. Move all his appointments to Dr. Gill and notify the patients via WhatsApp"

2. **AI Breaks Down into Plan:**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                        MULTI-STEP OPERATION                             â”‚
   â”‚                                                                         â”‚
   â”‚  I'll help you with Dr. Rohit's leave. Here's my plan:                 â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Step 1 of 4: Find Appointments                                 â”‚   â”‚
   â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
   â”‚  â”‚  Found 12 appointments for Dr. Rohit Sharma                     â”‚   â”‚
   â”‚  â”‚  Week: Nov 25 - Nov 29, 2024                                    â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
   â”‚  â”‚  â”‚ Mon Nov 25: 3 appointments                              â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ Tue Nov 26: 4 appointments                              â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ Wed Nov 27: 2 appointments                              â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ Thu Nov 28: 3 appointments                              â”‚   â”‚   â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
   â”‚  â”‚                                                 [View All â–¼]   â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Step 2 of 4: Check Dr. Gill's Availability                     â”‚   â”‚
   â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
   â”‚  â”‚  âœ“ Dr. Gill can accommodate 10 of 12 appointments              â”‚   â”‚
   â”‚  â”‚  âš ï¸ 2 conflicts found - suggest alternative times               â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Conflicts:                                                     â”‚   â”‚
   â”‚  â”‚  â€¢ Mon 2PM: Ravi Kumar â†’ Suggest Mon 3PM âœ“                     â”‚   â”‚
   â”‚  â”‚  â€¢ Thu 10AM: Priya Patel â†’ Suggest Thu 11AM âœ“                  â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Step 3 of 4: Reassign Appointments                             â”‚   â”‚
   â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
   â”‚  â”‚  â³ Pending your approval                                       â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Step 4 of 4: Send WhatsApp Notifications                       â”‚   â”‚
   â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
   â”‚  â”‚  â³ Will send after appointments are reassigned                 â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â”‚  Message Preview:                                               â”‚   â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
   â”‚  â”‚  â”‚ Dear {Patient Name},                                    â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚                                                         â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ Your appointment with Dr. Rohit Sharma has been         â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ rescheduled to Dr. Gill on {New Date} at {New Time}.   â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚                                                         â”‚   â”‚   â”‚
   â”‚  â”‚  â”‚ Reply YES to confirm or call us to reschedule.         â”‚   â”‚   â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
   â”‚  â”‚                                                  [Edit Template]â”‚   â”‚
   â”‚  â”‚                                                                 â”‚   â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚                                                                         â”‚
   â”‚  [Cancel All]                              [âœ“ Execute All Steps]       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. **Visual Execution Feedback:**
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    EXECUTING PLAN                               â”‚
   â”‚                                                                 â”‚
   â”‚  Step 1: Find Appointments         âœ“ Complete                  â”‚
   â”‚  Step 2: Check Availability        âœ“ Complete                  â”‚
   â”‚  Step 3: Reassign Appointments     â³ In Progress (8/12)       â”‚
   â”‚  Step 4: Send Notifications        â¸ï¸ Waiting                   â”‚
   â”‚                                                                 â”‚
   â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”  67%               â”‚
   â”‚                                                                 â”‚
   â”‚  [Cancel Remaining]                                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

---

### Journey 3.5: Query and Analytics via Natural Language

**Persona:** Clinic Administrator seeking insights

**Context:** Administrator wants to understand appointment patterns without building reports.

**Flow:**
```
Open Command Bar â†’ Ask Question â†’ AI Queries Data â†’ Render Visualization
```

**Examples:**

**Query 1:** "Show me today's schedule for Dr. Sharma"
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Dr. Rohit Sharma - Today's Schedule                 â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 9:00 AM  â”‚ John Doe        â”‚ Follow-up  â”‚ âœ“ Confirmed       â”‚  â”‚
â”‚  â”‚ 9:30 AM  â”‚ Jane Smith      â”‚ New Visit  â”‚ âœ“ Confirmed       â”‚  â”‚
â”‚  â”‚ 10:00 AM â”‚ â–‘â–‘â–‘ BREAK â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚  â”‚
â”‚  â”‚ 10:30 AM â”‚ Bob Wilson      â”‚ Follow-up  â”‚ â³ Pending        â”‚  â”‚
â”‚  â”‚ 11:00 AM â”‚ Mary Johnson    â”‚ Procedure  â”‚ âœ“ Confirmed       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  Summary: 8 appointments | 2 breaks | 87% confirmed                â”‚
â”‚                                                                     â”‚
â”‚  [Print] [Export] [Open Full Schedule]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Query 2:** "What's our no-show rate for the last 3 months by department?"
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              No-Show Rate by Department (Sep - Nov 2024)            â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  Cardiology      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  12.5%                â”‚  â”‚
â”‚  â”‚  Orthopedics     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  15.2%                â”‚  â”‚
â”‚  â”‚  General Medicineâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  8.3%                 â”‚  â”‚
â”‚  â”‚  Pediatrics      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  18.7%  âš ï¸ Highest    â”‚  â”‚
â”‚  â”‚  Dermatology     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  10.1%                â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  Overall Average: 12.9%                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ğŸ’¡ Insight: Pediatrics has high no-shows. Consider SMS reminders. â”‚
â”‚                                                                     â”‚
â”‚  [Drill Down] [Export Data] [Set Alert Threshold]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Specifications

### Command Bar Component

**Visual Structure:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            OVERLAY (Dim)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ [ğŸ”/ğŸ¤] [Input Field                              ] [Esc]  â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ [Content Area - Changes based on state]                          â”‚  â”‚
â”‚  â”‚                                                                   â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚ [Footer: Shortcuts, Tips, Context Info]                    â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**States:**
1. **Empty State** - Recent commands, quick actions
2. **Typing State** - Live parsing indicator
3. **Voice State** - Sound wave animation, transcription
4. **Results State** - Ghost card preview
5. **Executing State** - Progress indicator
6. **Error State** - Inline error with suggestions

### Entity Tag Component

```typescript
interface EntityTagProps {
  type: 'patient' | 'practitioner' | 'location' | 'time' | 'action' | 'medication';
  value: string;
  confidence: number; // 0-100
  isEditable: boolean;
  onEdit: () => void;
  options?: EntityOption[]; // For correction dropdown
}
```

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Icon] Label: Value             [â–¼] â”‚  â† High confidence (>80%)
â”‚        â””â”€â”€ Green checkmark          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Icon] Label: Value?            [â–¼] â”‚  â† Low confidence (<80%)
â”‚        â””â”€â”€ Yellow warning           â”‚
â”‚        â””â”€â”€ "Click to verify"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Voice Input Component

```typescript
interface VoiceInputProps {
  isListening: boolean;
  transcript: string;
  onStart: () => void;
  onStop: () => void;
  onTranscriptChange: (text: string) => void;
  language?: string; // Default: 'en-US'
}
```

**Browser API:** Web Speech API (SpeechRecognition)
**Fallback:** Whisper API via backend

---

## Supported Command Categories

### 1. Appointment Commands
```
"Book appointment for [patient] with [doctor] [time]"
"Reschedule [patient]'s appointment to [new time]"
"Cancel appointment for [patient]"
"Show [doctor]'s schedule for [date/period]"
"Find next available slot with [doctor]"
"Block [doctor]'s calendar [time range]"
```

### 2. Patient Commands
```
"Find patient [name/phone/MRN]"
"Add new patient [name] [phone]"
"Update [patient]'s phone number to [number]"
"Show [patient]'s history"
"Add allergy [allergen] for [patient]"
"Record vitals for [patient]: BP [value], HR [value]"
```

### 3. Clinical Commands
```
"Prescribe [medication] [dosage] for [patient]"
"Order [lab test] for [patient]"
"Create referral to [specialty] for [patient]"
"Add clinical note for [patient]"
"Start telehealth session with [patient]"
```

### 4. Communication Commands
```
"Send WhatsApp to [patient]: [message]"
"Send appointment reminder to [patient]"
"Broadcast message to [department] patients"
"Call [patient]"
```

### 5. Analytics Commands
```
"Show today's appointments"
"How many no-shows this week?"
"Revenue report for [period]"
"Patient volume by department"
"Show wait time trends"
```

### 6. Administrative Commands
```
"Add slot [time] for [doctor]"
"Create [doctor] on leave [dates]"
"Add new department [name]"
"Show pending tasks"
"Export [report type]"
```

---

## AI Parsing Architecture

### Intent Detection
```json
{
  "input": "Book a 2PM appointment for patient 9844111173 with Dr. Kohli",
  "parsed": {
    "intent": "book_appointment",
    "confidence": 0.95,
    "entities": [
      { "type": "time", "value": "14:00", "raw": "2PM", "confidence": 0.99 },
      { "type": "patient_phone", "value": "+919844111173", "raw": "9844111173", "confidence": 0.98 },
      { "type": "practitioner", "value": "Dr. Virat Kohli", "raw": "Dr. Kohli", "confidence": 0.92 }
    ],
    "missing_required": ["date"],
    "suggestions": ["Today", "Tomorrow", "Next available"]
  }
}
```

### Ambiguity Resolution
When confidence is low or multiple matches:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ I found multiple matches for "Dr. Kohli":                   â”‚
â”‚                                                                 â”‚
â”‚ â—‹ Dr. Virat Kohli - Orthopedics (Most likely)                  â”‚
â”‚ â—‹ Dr. Anushka Kohli - Cardiology                               â”‚
â”‚ â—‹ Dr. Raj Kohli - General Medicine                             â”‚
â”‚                                                                 â”‚
â”‚ Please select or say "Virat" / "Orthopedics" to clarify.       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `Cmd/Ctrl + K` | Open command bar |
| `Escape` | Close command bar |
| `Enter` | Execute command / Select suggestion |
| `â†‘ / â†“` | Navigate suggestions |
| `Tab` | Auto-complete suggestion |
| `Hold Space` | Voice input (when bar focused) |
| `Cmd/Ctrl + Enter` | Execute without confirmation |

---

## Accessibility Requirements

1. **Screen Reader Support**
   - Live region for transcription updates
   - Announce parsed entities
   - Describe suggestion list changes

2. **Keyboard Navigation**
   - Full keyboard operability
   - Focus trap within modal
   - Escape to close

3. **Voice Alternatives**
   - All voice commands available as text
   - Visual feedback for voice status
   - Error messages for voice failures

4. **Visual Accessibility**
   - High contrast mode support
   - Confidence indicators not color-only
   - Large touch targets on mobile

---

## Error Handling

### Parsing Failures
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â“ I couldn't understand that command.                          â”‚
â”‚                                                                 â”‚
â”‚ Did you mean:                                                   â”‚
â”‚ â€¢ Book an appointment                                           â”‚
â”‚ â€¢ Find a patient                                                â”‚
â”‚ â€¢ View schedule                                                 â”‚
â”‚                                                                 â”‚
â”‚ Or try saying it differently. Example:                          â”‚
â”‚ "Book appointment for John Doe with Dr. Sharma tomorrow 2PM"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Execution Failures
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ Couldn't complete the action                                 â”‚
â”‚                                                                 â”‚
â”‚ The 2PM slot is no longer available.                           â”‚
â”‚                                                                 â”‚
â”‚ Available alternatives:                                         â”‚
â”‚ [ğŸ“… Book 2:30 PM] [ğŸ“… Book 3:00 PM] [ğŸ“… Try different day]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Permission Errors
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”’ Action not permitted                                         â”‚
â”‚                                                                 â”‚
â”‚ You don't have permission to prescribe medications.            â”‚
â”‚ This action requires "Prescriber" role.                        â”‚
â”‚                                                                 â”‚
â”‚ [Request Access] [Contact Admin]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Acceptance Criteria

### AC-1: Command Bar Trigger
- [ ] Opens with Cmd+K / Ctrl+K from anywhere
- [ ] Opens with top bar search click
- [ ] Opens with floating button click
- [ ] Closes with Escape key
- [ ] Closes with click outside

### AC-2: Text Input
- [ ] Natural language parsing works accurately
- [ ] Entity extraction displays as tags
- [ ] Low confidence entities highlighted
- [ ] Correction dropdowns functional
- [ ] Auto-suggestions appear while typing

### AC-3: Voice Input
- [ ] Voice activation works (spacebar hold)
- [ ] Real-time transcription displays
- [ ] Transcription converts to parsed entities
- [ ] Clear feedback for listening state
- [ ] Graceful handling of voice failures

### AC-4: Context Awareness
- [ ] Current patient context detected
- [ ] Relevant quick actions displayed
- [ ] Short commands work with context
- [ ] Context displayed in footer

### AC-5: Execution
- [ ] Simple commands execute correctly
- [ ] Multi-step operations show plan
- [ ] Progress feedback during execution
- [ ] Success/error feedback clear
- [ ] Undo available where applicable

### AC-6: Mobile Experience
- [ ] Command bar works on mobile
- [ ] Voice input accessible
- [ ] Touch-friendly entity tags
- [ ] Full-screen modal on mobile

---

## Success Metrics

- Command bar usage: 50% of users daily
- Voice command adoption: 20% of commands
- Form bypass rate: 80% of simple operations
- Parse accuracy: >90% first attempt
- Average command completion time: <15 seconds
- User satisfaction: >4.5/5 stars

---

**Document Owner:** AI Product Team
**Last Updated:** November 25, 2024
**Review Cycle:** Every Sprint
